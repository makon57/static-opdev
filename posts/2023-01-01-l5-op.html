<!DOCTYPE html>
<html lang="en">
    <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Jekyll Experiment Site">
    <meta name="author" content="OpDev">

    <title>L5 Operator</title>

    <link rel="shortcut icon" href="../assets/images/favicon.ico">

    <title>Opdev Resource Page</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Nunito+Sans:300,600,700" rel="stylesheet">

    <!-- Bootstrap core CSS -->
    <link href="../assets/css/bootstrap.min.css" rel="stylesheet">

    <!-- MENU CSS -->
    <link href="../assets/css/metismenu.min.css" rel="stylesheet" type="text/css" />

    <!-- MATERIALDESIGN ICON -->
    <link rel="stylesheet" type="text/css" href="../assets/css/materialdesignicons.min.css">

    <!-- CUSTOM STYLESHEET -->
    <link href="../assets/css/style.css" rel="stylesheet" type="text/css" />
    <link href="../assets/css/default.css" rel="stylesheet" type="text/css" />
</head>

    <body>
        <!-- Begin page -->
        <div id="wrapper">
            <!-- Top Bar Start -->
            <div class="topbar-mobile">
                <div class="logo">
                    <a href="../"><img src="../assets/images/red-logo.jpg" alt="" class="" style="height: 66px;"></a>
                    <button class="button-menu-mobile">
                        <i class="mdi mdi-menu"></i>
                    </button>
                </div>
            </div>
            <!-- Top Bar End -->
            <!-- ========== Left Sidebar Start ========== -->
            <div class="left side-menu">

                <div class="slimscroll-menu" id="remove-scroll">

                    <div class="logo">
                        <a href="../"><img src="../assets/images/red-logo.jpg" alt="" class="" style="height: 66px;"></a>
                        <p class="text-muted">The Central location for everything operators. Resources and content curated by Red Hat's Operator Enablement and Tooling Team.</p>
                    </div>

                    <!--- Sidemenu -->
                    <div id="sidebar-menu">
                        <!-- Left Menu Start -->
                        <!-- Left Menu Start -->
<ul class="metismenu" id="side-menu">

    <li>
        <a href="../"><span> Home</span></a>
    </li>

    <li>
        <a href="javascript: void(0);"><span> Features </span></a>
        <ul class="nav-second-level" aria-expanded="false">
            <li><a href="../standard-post.html">Standard Post</a></li>
            <li><a href="../video-post.html">Video Post</a></li>
            <li><a href="../audio-post.html">Audio Post</a></li>
        </ul>
    </li>

    <li>
        <a target="_blank" rel="noopener noreferrer" href="https://redhat-connect.gitbook.io/certified-operator-guide/"><span> Operator Certification </span></a>
    </li>

    <li>
        <a href="javascript: void(0);"><span> Partner Engagement </span></a>
    </li>

    <li>
        <a target="_blank" rel="noopener noreferrer" href="http://workshop.coreostrain.me/support/"><span> Operator Workshop </span></a>
    </li>

    <li>
        <a href="../about.html">About</a>
    </li>

    <li>
        <a href="../contact.html">Contact</a>
    </li>

</ul>


                        <div class="copyright-box">
                            <p>2023 ¬© Operator Enablement & Tooling Team </p>
                        </div>

                    </div>
                    <!-- Sidebar -->
                    <div class="clearfix"></div>

                </div>
                <!-- Sidebar -left -->

            </div>
            <!-- Left Sidebar End -->

            <!-- Wrapper -->
            <div class="page-wrapper">
                <section>
                    <div class="container">
                        <div class="row">
                            <div class="col-lg-12">
                                <div class="page-title">
                                    <div class="row">
                                        <div class="col-md-9 col-xs-12">
                                            <h2><span>L5 Operator</span></h2>

                                            <p class="subtitle text-muted">Aenean sollicitudin, lorem quis bibendum auctor, nisi elit consequat ipsum, nec sagittis sem nibh id elit. Proin gravida nibh vel velit auctor Aenean sollicitudin, adipisicing elit sed lorem quis bibendum auctor.</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="mt-5 pb-5">
                    <div class="container">

                        <div class="row" style="justify-content: space-between;">
                            <!-- Content-->
                            <div class="col-xl-8">

                            <!-- Post-->
<article class="post">
    <div class="post-header">
        <h2 class="post-title"><a href="#">L5 Operator</a></h2>
        <ul class="post-meta">
            <li><i class="mdi mdi-calendar"></i> 01 Jan 2023</li>
        </ul>
    </div>

    <div class="post-preview">
        <a href="#"><img src="../assets/images/blog/blog-1.jpg" alt="" class="img-fluid rounded"></a>
    </div>

    <div class="blog-detail-description">
        <p><p>The L5 Operator‚Äôs README file as an example.</p>

<h1 id="l5-demo-operator-Ô∏è">L5 Demo Operator üèóÔ∏è</h1>

<p>The projects goal is to develop a demo operator with level 5 capabilities to serve as an example to enhance workshop <a href="https://drive.google.com/drive/u/0/folders/1l6FY1QdBq1IsmwM6Ib44A8h12OSKGJbe">(internal)</a> as well as to present at kubecon or a similar conference for which a <a href="https://drive.google.com/file/d/1GjJgBcJmywP3L64m1h4vZ68UIu-XJxMZ/view?usp=sharing">proposal</a> was submitted. One version of the <a href="https://opdev.github.io/l5-operator-demo/">(presentation)</a> was accepted to <a href="https://cfp.cloud-native.rejekts.io/cloud-native-rejekts-eu-valencia-2022/talk/review/LESBCQ3MJQFEE3JWMRCJKKL9XT7YMDHP">(cloud native rejects)</a>. The capabilities are being developed according to our interpretation of the requirements described by the operator capability descriptions given in the operator sdk which are currently being evolved <a href="https://docs.google.com/document/d/1gNa2NQzlsHDdNHBYPczCytkuokEzBCFKjlxM12X5cdk/edit?usp=sharing">working in progress</a></p>

<h2 id="current-capability-descriptions">Current Capability descriptions</h2>
<p>The l5 operator is an example of a minimal implementation of the 5 capability levels described by the operator framework</p>

<h3 id="level-1-basic-install">Level 1: Basic Install</h3>
<p>The L5 operator is able to take advantage of the Operator Lifecycle Manager and is able to deployed with one click. Once deployed it is able to set up its operator upon creation of a custom resource. User can install the operand by creating and configuring the CR. When configuration changes are applied, the app version is reported in the status and the operand updates in a non-distruptive fashion when the configuration of the CR is changed.</p>

<h3 id="level-2-seamless-upgrades">Level 2: Seamless Upgrades</h3>
<p>It‚Äôs possible to rollout both operator and operand updates seamlessly with some caveats. Liveness and readiness probes come free. The operator is able to update the operand via the CR field. By doing so, we are able to control the app version and report the status.</p>

<h3 id="level-3-full-lifecycle">Level 3: Full Lifecycle</h3>
<p>Backup and restore functionality is provided via the crunchy postgres operator which we consume in order to get a database-as-a-service right within our cluster. The L5 operator contains a liveness and readiness probe, so if the connection to the database fails, it will wait for reconfiguration work to be finished. The L5 operator utilizes the rolling deployment strategy.</p>

<h3 id="level-4-deep-insights">Level 4: Deep Insights</h3>
<p>The operator as well as operand expose metrics. These are aggregated using Prometheus and visualized using Grafana. The operator exposes health metrics endpoints such as app latency, request per second, and http codes. Currently we are working on implementing the RED method which defines three key metrics for any service: <em>*rate*</em> - the number of requests per second, <em>*errors*</em> - the number of those requests that are failing, and <em>*duration*</em> - the amount of time those requests take.</p>

<h3 id="level-5-autopilot">Level 5: Autopilot</h3>
<p>The operator is able to autoscale by automatically provisioning a horizontal pod autoscaler that automatically changes the size of the deployment based on application load. The operator is able to scale the pods accordingly within the range of the size and maxReplicas we declare.</p>

<h1 id="operator-installation">Operator Installation</h1>
<p>The operator is published as a community operator on the openshift operator hub.</p>

<h2 id="different-ways-to-run-the-operator-using-the-operator-sdk">Different ways to run the Operator using the Operator SDK</h2>

<h3 id="prerequisites">Prerequisites</h3>
<ul>
  <li>When not using OLM to install the L5 Operator, the Crunchy Data Postgres Operator needs to be installed either from Operator Hub when using Openshift or <a href="https://access.crunchydata.com/documentation/postgres-operator/v5/quickstart/">manually</a></li>
  <li>The L5 Operator requires an ingress controller to be installed if running on vanilla kubernetes if not already present. Steps for installing ingress controller for different clusters can be followed from <a href="https://kubernetes.github.io/ingress-nginx/deploy/">here</a></li>
</ul>

<h3 id="1-run-locally-outside-the-cluster">1. Run locally outside the cluster</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/opdev/l5-operator-demo
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;project&gt;
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make generate
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make manifests
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make install
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make run
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>oc apply -f config/samples/pets_v1_bestie.yaml
</code></pre></div></div>

<h3 id="2-run-as-a-deployment-inside-the-cluster">2. Run as a Deployment inside the cluster</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone https://github.com/opdev/l5-operator-demo
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>cd &lt;project&gt;
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make generate
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make manifests
</code></pre></div></div>

<ul>
  <li>Build and push your image to the location specified by IMG:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make docker-build docker-push IMG=&lt;some-registry&gt;/&lt;project-name&gt;:tag
</code></pre></div>    </div>
  </li>
  <li>Deploy the controller to the cluster with image specified by IMG:
    <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>make deploy IMG=&lt;some-registry&gt;/&lt;project-name&gt;:tag
</code></pre></div>    </div>
  </li>
</ul>

<h3 id="3-deploy-the-operator-with-olm">3. Deploy the Operator with OLM</h3>
<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>operator-sdk run bundle &lt;operator-bundle-image&gt;
</code></pre></div></div>
</p>

        <div class="mt-5">
            <h6>Tags:</h6>
                
        </div>

        <div class="media post-author-box">
            <img class="d-flex mr-3 rounded-circle" src="../assets/images/user/user-5.png" alt="Generic placeholder image">
            <div class="media-body">
                <h4 class="media-heading"><a href="">Michelle Durant</a></h4>
                <p class="mb-0">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nam viverra euismod odio, gravida pellentesque urna varius vitae. Sed dui lorem, adipiscing in adipiscing et, interdum nec metus. Mauris ultricies, justo eu convallis placerat, felis enim.</p>

                <ul class="socials list-unstyled mb-0 mt-3">
                    <li><a href="http://facebook.com"><i class="mdi mdi-facebook"></i></a></li>
                    <li><a href="http://twitter.com"><i class="mdi mdi-twitter"></i></a></li>
                    <li><a href="http://instagram.com"><i class="mdi mdi-instagram"></i></a></li>
                    <li><a href="http://pinterest.com"><i class="mdi mdi-pinterest"></i></a></li>
                </ul>
            </div>
        </div>

        <div class="mt-5 text-center">
            <h5 class="page-title-alt"><span>You Might Also Like</span></h5>
        </div>

        <div class="row">
            <div class="col-sm-4">
                <article class="related-post">
                    <div class="post-preview">
                        <a href="#"><img src="../assets/images/blog/blog-2.jpg" alt="" class="img-fluid rounded"></a>
                    </div>

                    <div class="post-header">
                        <h6><a href="single-post2.html" title="">15 Best Healthy and Easy Salad Recipes</a></h6>
                        <p class="post-date">August 12, 2017</p>
                    </div>
                </article>
            </div>
            <div class="col-sm-4">
                <article class="related-post">
                    <div class="post-preview">
                        <a href="#"><img src="../assets/images/blog/blog-3.jpg" alt="" class="img-fluid rounded"></a>
                    </div>

                    <div class="post-header">
                        <h6><a href="single-post2.html" title="">The planet doesn‚Äôt need saving. We do.</a></h6>
                        <p class="post-date">August 17, 2017</p>
                    </div>
                </article>
            </div>
            <div class="col-sm-4">
                <article class="related-post">
                    <div class="post-preview">
                        <a href="#"><img src="../assets/images/blog/blog-4.jpg" alt="" class="img-fluid rounded"></a>
                    </div>

                    <div class="post-header">
                        <h6><a href="single-post2.html" title="">Modern City With Amazing Dark Blue Sea</a></h6>
                        <p class="post-date">August 20, 2017</p>
                    </div>
                </article>
            </div>
        </div>

    </div>

</article>
<!-- Post end-->


                            </div>
                            <!-- Content end-->

                            <!-- Sidebar-->
                            <div class="col-xl-4">
                                <div class="sidebar">

                                    <!-- Search widget-->
                                    <aside class="widget widget_search">
                                        <!-- Html Elements for Search -->
                                       <!-- Html Elements for Search -->

<div id="search-container"></div>
   <form>
      <input class="form-control pr-5" id="search-input" type="search" placeholder="Search...">
      <ul id="results-container"></ul>
   </form>
</div>
<script src="../assets/js/search-script.js"></script>
<script>
     window.simpleJekyllSearch = new SimpleJekyllSearch({
        searchInput: document.getElementById('search-input'),
        resultsContainer: document.getElementById('results-container'),
        json: '/search.json',
        searchResultTemplate: '<li><a href="http://localhost:4000{url}">{title}</a></li>',
        noResultsText: 'No results found',
        limit: 10,
        fuzzy: false,
        exclude: ['Welcome']
      })
</script>
                                    </aside>

                                    <aside class="widget about-widget">
                                        <div class="widget-title">About Me</div>

                                        <div class="text-center">
                                            <img src="../assets/images/photo.jpg" alt="About Me" class="rounded-circle">

                                            <p>Quis vero phasellus hac nullam, in quam vitae duis adipiscing mauris leo, laoreet eget at quis, ante vestibulum vivamus vel. Sapien lobortis, eget orci purus amet pede, consectetur neque risus.</p>
                                        </div>

                                    </aside>

                                    <aside class="widget about-widget">
                                        <div class="widget-title">Subscribe & Follow</div>

                                        <ul class="socials">
                                            <li><a href="http://facebook.com"><i class="mdi mdi-facebook"></i></a></li>
                                            <li><a href="http://twitter.com"><i class="mdi mdi-twitter"></i></a></li>
                                            <li><a href="http://instagram.com"><i class="mdi mdi-instagram"></i></a></li>
                                            <li><a href="http://pinterest.com"><i class="mdi mdi-pinterest"></i></a></li>
                                        </ul>

                                    </aside>

                                    <!-- Categories widget-->
                                    <aside class="widget widget_categories">
                                        <div class="widget-title all-tags">Categories</div>
                                        <ul>
                                            
                                            
                                            
                                            <li class="tagcloud">
                                                <a class="tag-link"
                                                href=/operators/
                                                rel="category tag">
                                                operators (2)
                                                </a>
                                            </li>
                                            
                                        </ul>
                                    </aside>

                                    <!-- Recent entries widget-->
                                    <aside class="widget widget_recent_entries_custom">
                                        <div class="widget-title">Popular Posts</div>
                                        <ul>
                                            <li class="clearfix">
                                                <div class="wi">
                                                    <a href="#"><img src="../assets/images/works/img1.jpg" alt="" class="img-fluid"></a>
                                                </div>
                                                <div class="wb"><a href="#">Beautiful Day With Friends..</a> <span class="post-date">Jun 15, 2017</span></div>
                                            </li>
                                            <li class="clearfix">
                                                <div class="wi">
                                                    <a href="#"><img src="../assets/images/works/img2.jpg" alt="" class="img-fluid"></a>
                                                </div>
                                                <div class="wb"><a href="#">Nature valley with cooling..</a> <span class="post-date">Jun 10, 2017</span></div>
                                            </li>
                                            <li class="clearfix">
                                                <div class="wi">
                                                    <a href="#"><img src="../assets/images/works/img3.jpg" alt="" class="img-fluid"></a>
                                                </div>
                                                <div class="wb"><a href="#">15 Best Healthy and Easy Salad..</a> <span class="post-date">Jun 8, 2017</span></div>
                                            </li>
                                        </ul>
                                    </aside>

                                    <!-- Text widget-->
                                    <aside class="widget">
                                        <div class="widget-title">Text Widget</div>

                                        <p class="text-muted text-widget-des">Exercitation photo booth stumptown tote bag Banksy, elit small batch freegan sed. Craft beer elit seitan exercitation, photo booth et 8-bit kale chips proident chillwave deep v laborum. Aliquip veniam delectus, Marfa eiusmod Pinterest in do umami readymade swag. </p>

                                    </aside>

                                    <!-- Archives widget-->
                                    <aside class="widget">
                                        <div class="widget-title">Archives</div>

                                        <ul>
                                            <li><a href="#">March 2017</a> (40)</li>
                                            <li><a href="#">April 2017</a> (08)</li>
                                            <li><a href="#">May 2017</a> (11)</li>
                                            <li><a href="#">Jun 2017</a> (21)</li>
                                        </ul>

                                    </aside>

                                    <!-- Tags widget-->
                                    <aside class="widget widget_tag_cloud">
                                        <div class="widget-title">Tags</div>
                                        <div class="tagcloud">
                                            
                                            
                                            
                                                <a class="tag-link"
                                                href=/fruits/
                                                rel="category tag">
                                                fruits (3)
                                                </a>
                                            
                                            
                                                <a class="tag-link"
                                                href=/short-read/
                                                rel="category tag">
                                                short-read (2)
                                                </a>
                                            
                                        </div>
                                    </aside>
                                </div>
                            </div>
                            <!-- Sidebar end-->
                        </div>

                    </div>
                    <!-- end container -->
                </section>
            </div>
            <!-- End Wrapper -->

        </div>
        <!-- js placed at the end of the document so the pages load faster -->
<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/popper.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
<script src="../assets/js/jquery.easing.min.js"></script>
<script src="../assets/js/metisMenu.min.js"></script>
<!--common script for all pages-->
<script src="../assets/js/jquery.app.js"></script>

    </body>

</html>
